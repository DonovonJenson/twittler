<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        var index = streams.home.length - 1;
        var startTweets = streams.home.length - 1;

        while(index >= 0){
          makeTweet(index);
          index -= 1;
        }

        function makeTweet(location){
          var tweet = streams.home[location];
          var $tweet = $('<div class = \'tweet\'><p> ' + tweet.message + '<p></div>');
          var $user = $('<div class = \'name\'>@' + tweet.user + '</div>');
          var $timestamp = $('<div class = \'timestamp\'>'+ tweet.created_at +'</div>');
          $user.appendTo($body);
          $tweet.appendTo($user);
          $timestamp.appendTo($tweet);
        }

        function checkNewTweets(){
          var newTweets = streams.home.length-1;
          if (newTweets !== startTweets){
            for (var i = startTweets; startTweets < newTweets; i++){
              makeTweet(i)
              startTweets++;
            }
          }
        }

            var checkTweets = setInterval(checkNewTweets, 5000);

            $('.name').on("click",function(){
            //username = username.replace('@','');
            var name = ($(this).text());
            name = name.match(/@\b[a-z]*/)[0].slice(1,name.length);
              $('.name').remove();
              clearInterval(checkTweets);
              var $button = $('<div class = \'return\'><button>Return to Feed</button></div>')
              $button.appendTo($body);
              for (var i = 0; i < streams.users[name].length-1; i++){
                console.log(streams.users[name][i]);
              }
            })

      });
    </script>
  </body>
</html>
